"use strict";(self["webpackChunksoaplement"]=self["webpackChunksoaplement"]||[]).push([[592],{3714:function(e,t,l){function s(e){const t=parseInt(e,10);return`${t.toFixed(0).replace(/./g,((e,t,l)=>t&&"."!==e&&(l.length-t)%3===0?`, ${e}`.replace(/\s/g,""):e))}`}function a(e){const t=new Date(1e3*e);return t.toLocaleDateString()}l.d(t,{A:function(){return s},h:function(){return a}})},7592:function(e,t,l){l.r(t),l.d(t,{default:function(){return Ze}});var s=l(3396),a=l(9242),o=l(7139);const i=(0,s._)("h2",{class:"font-monospace"},"Products",-1),d={class:"d-grid d-flex justify-content-end"},r={class:"table table-borderless"},c=(0,s._)("thead",{class:"bg-dark text-white"},[(0,s._)("tr",{class:"align-middle text-center"},[(0,s._)("th",{scope:"col",class:"d-none d-lg-table-cell border border-2 border-white"},"Picture"),(0,s._)("th",{scope:"col",class:"border border-2 border-white"},"Title"),(0,s._)("th",{scope:"col",class:"d-none d-sm-table-cell border border-2 border-white"},"Category"),(0,s._)("th",{scope:"col",class:"d-none d-lg-table-cell border border-2 border-white"},"Description"),(0,s._)("th",{scope:"col",class:"d-none d-sm-table-cell border border-2 border-white"},"Price"),(0,s._)("th",{scope:"col",class:"border border-2 border-white"},"Sale Price"),(0,s._)("th",{scope:"col",class:"border border-2 border-white"},"Status"),(0,s._)("th",{scope:"col",class:"border border-2 border-white"},"Edit")])],-1),n={class:"d-none d-lg-table-cell w-50"},m={class:"row"},u={class:"col-6"},p=["src"],h={class:"col-6"},b=["src"],g={class:"d-none d-sm-table-cell"},_={class:"d-none d-lg-table-cell"},f={class:"d-none d-sm-table-cell"},I={key:0,class:"text-success"},y={key:1,class:"text-danger"},v=["onClick"],w=["onClick"],x=(0,s._)("i",{class:"fa-solid fa-pen-to-square text-info"},null,-1),U=[x];function k(e,t,l,x,k,M){const V=(0,s.up)("isLoading"),D=(0,s.up)("ProductModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[i,(0,s.Wm)(V,{active:k.isLoading},null,8,["active"]),(0,s._)("div",d,[(0,s._)("button",{class:"btn btn-light rounded-1 mb-3 text-end",onClick:t[0]||(t[0]=(0,a.iM)((t=>e.openModal(!0)),["prevent"]))},"Add")]),(0,s._)("table",r,[c,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"mb-3"},[(0,s._)("td",n,[(0,s._)("div",m,[(0,s._)("div",u,[(0,s._)("img",{src:t.mainImageUrl,alt:"picture",class:"img-fluid"},null,8,p)]),(0,s._)("div",h,[(0,s._)("img",{src:t.mainImageUrl2,alt:"picture",class:"img-fluid"},null,8,b)])])]),(0,s._)("td",null,(0,o.zw)(t.title),1),(0,s._)("td",g,(0,o.zw)(t.category),1),(0,s._)("td",_,(0,o.zw)(t.description),1),(0,s._)("td",f,(0,o.zw)(M.currency(t.origin_price)),1),(0,s._)("td",null,(0,o.zw)(M.currency(t.price)),1),t.is_enabled?((0,s.wg)(),(0,s.iD)("td",I,"Available")):((0,s.wg)(),(0,s.iD)("td",y,"Invalid")),(0,s._)("td",{onClick:e=>M.copyItem(t),role:"button",class:"text-center"},"copy",8,v),(0,s._)("td",{onClick:l=>e.openModal(!1,t),role:"button",class:"text-center"},U,8,w)])))),128))])]),(0,s.Wm)(D,{ref:"modal",item:k.tempItem,onUpdateItem:M.updateItem,onDeleteItem:M.deleteItem},null,8,["item","onUpdateItem","onDeleteItem"])],64)}const M={class:"modal",tabindex:"-1",ref:"modal",id:"editModal"},V={class:"modal-dialog modal-xl"},D={class:"modal-content"},C={class:"modal-header bg-primary text-white"},F={class:"modal-title"},$=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),P={class:"modal-body"},W={class:"row"},q={class:"col-md-6"},S={class:"mb-3"},L=(0,s._)("label",{for:"title",class:"form-label"},"Title",-1),R={class:"row gx-4"},z={class:"mb-3 col-sm-6 col-md-3"},A=(0,s._)("label",{for:"category",class:"form-label"},"Category",-1),Z={class:"mb-3 col-sm-6 col-md-3"},T=(0,s._)("label",{for:"price",class:"form-label"},"Unit",-1),H={class:"mb-3 col-sm-6 col-md-3"},N=(0,s._)("label",{for:"origin_price",class:"form-label"},"Price",-1),E={class:"mb-3 col-sm-6 col-md-3"},Y=(0,s._)("label",{for:"price",class:"form-label"},"Special offer",-1),j=(0,s._)("hr",null,null,-1),B={class:"mb-3"},K=(0,s._)("label",{for:"content",class:"form-label"},"Characteristic",-1),O={class:"mb-3"},G=(0,s._)("label",{for:"content",class:"form-label"},"Content",-1),J={class:"mb-3"},Q=(0,s._)("label",{for:"description",class:"form-label"},"Description",-1),X={class:"mb-3"},ee=(0,s._)("label",{for:"content",class:"form-label"},"How to use",-1),te={class:"mb-3"},le={class:"form-check"},se=(0,s._)("label",{class:"form-check-label",for:"is_enabled"},"Available",-1),ae=(0,s._)("hr",null,null,-1),oe={class:"col-md-6"},ie={class:"mb-3"},de=(0,s._)("label",{for:"image",class:"form-label"},"Upload an pictures by url",-1),re={class:"mb-3"},ce=(0,s._)("label",{for:"customFile",class:"form-label"},"or upload pictures",-1),ne=["src"],me={class:"mb-3"},ue=(0,s._)("label",{for:"image",class:"form-label"},"Upload an pictures by url",-1),pe={class:"mb-3"},he=(0,s._)("label",{for:"customFile",class:"form-label"},"or upload pictures",-1),be=["src"],ge={class:"modal-footer"},_e={key:0,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},fe={key:1,type:"button",class:"btn btn-outline-danger","data-bs-toggle":"modal",href:"#deleteModal"},Ie=(0,s._)("button",{type:"submit",class:"btn btn-primary"},"Confirm",-1),ye={class:"modal fade",id:"deleteModal",tabindex:"-1",ref:"deleteModal"},ve={class:"modal-dialog modal-dialog-centered"},we={class:"modal-content"},xe=(0,s._)("div",{class:"modal-header bg-danger"},[(0,s._)("h5",{class:"modal-title"},"Delete Item"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ue={class:"modal-body"},ke=(0,s.Uk)(" Are you sure to delete "),Me={class:"fw-bold text-uppercase"},Ve={class:"modal-footer"},De=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-toggle":"modal","data-bs-target":"#editModal"},"Back",-1);function Ce(e,t,l,i,d,r){const c=(0,s.up)("Field"),n=(0,s.up)("ErrorMessage"),m=(0,s.up)("Form");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",M,[(0,s._)("div",V,[(0,s._)("div",D,[(0,s._)("div",C,[(0,s._)("h5",F,(0,o.zw)(e.tempItem.status)+" Product",1),$]),(0,s.Wm)(m,{onSubmit:r.onSubmit},{default:(0,s.w5)((()=>[(0,s._)("div",P,[(0,s._)("div",W,[(0,s._)("div",q,[(0,s._)("div",S,[L,(0,s.Wm)(c,{type:"text",class:"form-control",id:"title",name:"title",modelValue:e.tempItem.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tempItem.title=t),rules:r.validateRequired},null,8,["modelValue","rules"]),(0,s.Wm)(n,{name:"title",class:"text-warning"})]),(0,s._)("div",R,[(0,s._)("div",z,[A,(0,s.Wm)(c,{type:"text",class:"form-control",id:"category",name:"category",modelValue:e.tempItem.category,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tempItem.category=t),rules:r.validateRequired},null,8,["modelValue","rules"]),(0,s.Wm)(n,{name:"category",class:"text-warning"})]),(0,s._)("div",Z,[T,(0,s.Wm)(c,{type:"text",class:"form-control",id:"unit",name:"unit",modelValue:e.tempItem.unit,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tempItem.unit=t),rules:r.validateRequired},null,8,["modelValue","rules"]),(0,s.Wm)(n,{name:"unit",class:"text-warning"})]),(0,s._)("div",H,[N,(0,s.Wm)(c,{type:"number",class:"form-control",id:"origin_price",name:"origin_price",modelValue:e.tempItem.origin_price,"onUpdate:modelValue":t[3]||(t[3]=t=>e.tempItem.origin_price=t),modelModifiers:{number:!0},rules:r.validateRequired},null,8,["modelValue","rules"]),(0,s.Wm)(n,{name:"origin_price",class:"text-warning"})]),(0,s._)("div",E,[Y,(0,s.Wm)(c,{type:"number",class:"form-control",id:"price",name:"price",modelValue:e.tempItem.price,"onUpdate:modelValue":t[4]||(t[4]=t=>e.tempItem.price=t),modelModifiers:{number:!0},rules:r.validateRequired},null,8,["modelValue","rules"]),(0,s.Wm)(n,{name:"price",class:"text-warning"})])]),j,(0,s._)("div",B,[K,(0,s.wy)((0,s._)("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":t[5]||(t[5]=t=>e.tempItem.characteristic=t)},null,512),[[a.nr,e.tempItem.characteristic]])]),(0,s._)("div",O,[G,(0,s.wy)((0,s._)("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":t[6]||(t[6]=t=>e.tempItem.content=t)},null,512),[[a.nr,e.tempItem.content]])]),(0,s._)("div",J,[Q,(0,s.wy)((0,s._)("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[7]||(t[7]=t=>e.tempItem.description=t)},null,512),[[a.nr,e.tempItem.description]])]),(0,s._)("div",X,[ee,(0,s.wy)((0,s._)("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":t[8]||(t[8]=t=>e.tempItem.use=t)},null,512),[[a.nr,e.tempItem.use]])]),(0,s._)("div",te,[(0,s._)("div",le,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[9]||(t[9]=t=>e.tempItem.is_enabled=t)},null,512),[[a.e8,e.tempItem.is_enabled]]),se])]),ae]),(0,s._)("div",oe,[(0,s._)("div",ie,[de,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":t[10]||(t[10]=t=>e.tempItem.mainImageUrl=t),required:""},null,512),[[a.nr,e.tempItem.mainImageUrl]])]),(0,s._)("div",re,[ce,(0,s._)("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:t[11]||(t[11]=(...e)=>r.uploadFile&&r.uploadFile(...e))},null,544)]),e.tempItem.mainImageUrl?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"img-fluid",alt:"product image",src:e.tempItem.mainImageUrl},null,8,ne)):(0,s.kq)("",!0),(0,s._)("div",me,[ue,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":t[12]||(t[12]=t=>e.tempItem.mainImageUrl2=t),required:""},null,512),[[a.nr,e.tempItem.mainImageUrl2]])]),(0,s._)("div",pe,[he,(0,s._)("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:t[13]||(t[13]=(...e)=>r.uploadFile&&r.uploadFile(...e))},null,544)]),e.tempItem.mainImageUrl?((0,s.wg)(),(0,s.iD)("img",{key:1,class:"img-fluid",alt:"product image",src:e.tempItem.mainImageUrl2},null,8,be)):(0,s.kq)("",!0)])])]),(0,s._)("div",ge,["new"===e.tempItem.status?((0,s.wg)(),(0,s.iD)("button",_e,"Close")):((0,s.wg)(),(0,s.iD)("button",fe,"Delete")),Ie])])),_:1},8,["onSubmit"])])])],512),(0,s._)("div",ye,[(0,s._)("div",ve,[(0,s._)("div",we,[xe,(0,s._)("div",Ue,[ke,(0,s._)("span",Me,(0,o.zw)(e.tempItem.title),1)]),(0,s._)("div",Ve,[De,(0,s._)("button",{class:"btn btn-danger",onClick:t[14]||(t[14]=(...t)=>e.deleteItem&&e.deleteItem(...t))},"Delete")])])])],512)],64)}var Fe=l(5842),$e=l(5708),Pe={mixins:[Fe.Z],components:{Form:$e.l0,Field:$e.gN,ErrorMessage:$e.Bc},methods:{onSubmit(e){this.updateItem()},validateRequired(e){return!!e||"This field is required"},uploadFile(){const e=this.$refs.fileInput.files[0],t=new FormData;t.append("file-to-upload",e);const l="https://vue3-course-api.hexschool.io/api/h513h/admin/upload";this.$http.post(l,t).then((e=>{e.data.success&&(this.tempItem.imageUrl=e.data.imageUrl)}))},updateItem(){this.$emit("update-item",this.tempItem)}}},We=l(89);const qe=(0,We.Z)(Pe,[["render",Ce]]);var Se=qe,Le=l(7646),Re=l(3714),ze={mixins:[Le.Z],components:{ProductModal:Se},data(){return{products:{},tempItem:{},isNew:!1,isLoading:!0}},methods:{currency:Re.A,date:Re.h,getProducts(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/h513h/products/all";this.$http.get(e).then((e=>{this.isLoading=!1,this.products=e.data.products.reverse()})).catch((e=>{console.log(e)}))},copyItem(e){this.tempItem=e;const t="https://vue3-course-api.hexschool.io/api/h513h/admin/product";this.$http.post(t,{data:this.tempItem}).then((e=>{e.data.success?(this.getProducts(),this.emitter.emit("push-message",{style:"success",title:"Succeeded!",content:"Renewed Product List!"})):this.emitter.emit("push-message",{style:"danger",title:"Failed",content:"There are some problems..."})}))},updateItem(e){this.tempItem=e;let t="https://vue3-course-api.hexschool.io/api/h513h/admin/product",l="post";this.isNew||(t=`https://vue3-course-api.hexschool.io/api/h513h/admin/product/${e.id}`,l="put");const s=this.$refs.modal;this.$http[l](t,{data:this.tempItem}).then((e=>{s.hideModal(),e.data.success?(this.getProducts(),this.emitter.emit("push-message",{style:"success",title:"Succeeded!",content:"Renewed Product List!"})):this.emitter.emit("push-message",{style:"danger",title:"Failed",content:"There are some problems..."})}))},deleteItem(e){this.temItem=e;const t=`https://vue3-course-api.hexschool.io/api/h513h/admin/product/${e.id}`;this.$http.delete(t,{data:this.tempItem}).then((e=>{const t=this.$refs.modal;t.hideModal(),this.getProducts()}))}},created(){this.getProducts()}};const Ae=(0,We.Z)(ze,[["render",k]]);var Ze=Ae},5842:function(e,t,l){l.d(t,{Z:function(){return d}});var s=l(7972),a=l.n(s),o={emits:["update-item","delete-item"],props:{item:{type:Object,default(){return{}}}},watch:{item(){this.tempItem=this.item}},data(){return{modal:{},tempItem:{}}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide(),this.deleteModal.hide()},deleteItem(){this.$emit("delete-item",this.tempItem)}},mounted(){this.modal=new(a())(this.$refs.modal),this.deleteModal=new(a())(this.$refs.deleteModal)}};const i=o;var d=i},7646:function(e,t,l){l.d(t,{Z:function(){return o}});var s={methods:{openModal(e,t){e?(this.tempItem={},this.tempItem.status="new"):(this.tempItem={...t},this.tempItem.status="edit"),this.isNew=e;const l=this.$refs.modal;l.showModal()}}};const a=s;var o=a}}]);
//# sourceMappingURL=592.e297a299.js.map