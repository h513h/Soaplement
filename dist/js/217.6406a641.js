"use strict";(self["webpackChunksoaplement"]=self["webpackChunksoaplement"]||[]).push([[217],{217:function(e,t,s){s.r(t),s.d(t,{default:function(){return oe}});var o=s(3396),l=s(9242),a=s(7139);const d=(0,o._)("h2",{class:"font-monospace"},"Coupons",-1),i={class:"d-grid d-flex justify-content-end"},n={class:"table table-borderless"},m=(0,o._)("thead",{class:"bg-dark text-white"},[(0,o._)("tr",{class:"align-middle text-center"},[(0,o._)("th",{scope:"col",class:"border border-2 border-white"},"Title"),(0,o._)("th",{scope:"col",class:"border border-2 border-white"},"Code"),(0,o._)("th",{scope:"col",class:"border border-2 border-white"},"Discount off%"),(0,o._)("th",{scope:"col",class:"border border-2 border-white"},"Status"),(0,o._)("th",{scope:"col",class:"border border-2 border-white"},"Edit")])],-1),c={key:0,class:"text-success"},r={key:1,class:"text-danger"},u=["onClick"],p=(0,o._)("i",{class:"fa-solid fa-pen-to-square text-info"},null,-1),h=[p];function b(e,t,s,p,b,g){const _=(0,o.up)("isLoading"),f=(0,o.up)("CouponModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[d,(0,o.Wm)(_,{active:b.isLoading},null,8,["active"]),(0,o._)("div",i,[(0,o._)("button",{class:"btn btn-light rounded-1 mb-3 text-end",onClick:t[0]||(t[0]=(0,l.iM)((t=>e.openModal(!0)),["prevent"]))},"Add")]),(0,o._)("table",n,[m,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(b.coupons,(t=>((0,o.wg)(),(0,o.iD)("tr",{class:"align-middle",key:t.id},[(0,o._)("td",null,(0,a.zw)(t.title),1),(0,o._)("td",null,(0,a.zw)(t.code),1),(0,o._)("td",null,(0,a.zw)(t.percent),1),t.is_enabled?((0,o.wg)(),(0,o.iD)("td",c,"Available")):((0,o.wg)(),(0,o.iD)("td",r,"Invalid")),(0,o._)("td",{onClick:(0,l.iM)((s=>e.openModal(!1,t)),["prevent"]),role:"button",class:"text-center"},h,8,u)])))),128))])]),(0,o.Wm)(f,{ref:"modal",item:b.tempItem,onUpdateItem:g.updateItem,onDeleteItem:g.deleteItem},null,8,["item","onUpdateItem","onDeleteItem"])],64)}const g={class:"modal",tabindex:"-1",ref:"modal",id:"editModal"},_={class:"modal-dialog"},f={class:"modal-content text-white"},v={class:"modal-header bg-primary"},w={class:"modal-title"},I=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),y={class:"modal-body text-dark"},x={class:"row"},M={class:"mb-3"},k=(0,o._)("label",{for:"title",class:"form-label text-dark"},"Title",-1),C={class:"mb-3"},D=(0,o._)("label",{for:"code",class:"form-label"},"Code",-1),$={class:"mb-3 d-flex justify-content-between"},V={class:"col-5 col-md-3"},W=(0,o._)("label",{for:"discount",class:"form-label"},"Discount%",-1),U={class:"col-6 p-0 d-flex justify-content-end align-items-end"},q={class:"form-check"},L=(0,o._)("label",{class:"form-check-label",for:"is_enabled"}," Available ",-1),S={class:"modal-footer"},Z={key:0,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},z={key:1,type:"button",class:"btn btn-outline-danger","data-bs-toggle":"modal",href:"#deleteModal"},F=(0,o._)("button",{type:"submit",class:"btn btn-primary"},"Confirm",-1),R={class:"modal fade",id:"deleteModal",tabindex:"-1",ref:"deleteModal"},T={class:"modal-dialog modal-dialog-centered"},j={class:"modal-content"},A=(0,o._)("div",{class:"modal-header bg-danger"},[(0,o._)("h3",{class:"modal-title"},"Delete Item"),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),N={class:"modal-body"},E=(0,o.Uk)(" Are you sure to delete "),H={class:"fw-bold text-uppercase"},Y={class:"modal-footer"},B=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-toggle":"modal","data-bs-target":"#editModal"},"Back",-1);function P(e,t,s,d,i,n){const m=(0,o.up)("Field"),c=(0,o.up)("ErrorMessage"),r=(0,o.up)("Form");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",g,[(0,o._)("div",_,[(0,o._)("div",f,[(0,o._)("div",v,[(0,o._)("h3",w,(0,a.zw)(e.tempItem.status)+" Coupon",1),I]),(0,o.Wm)(r,{onSubmit:n.onSubmit},{default:(0,o.w5)((()=>[(0,o._)("div",y,[(0,o._)("div",x,[(0,o._)("div",M,[k,(0,o.Wm)(m,{type:"text",class:"form-control",id:"title",name:"title",modelValue:e.tempItem.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tempItem.title=t),rules:n.validateRequired},null,8,["modelValue","rules"]),(0,o.Wm)(c,{name:"title",class:"text-warning"})]),(0,o._)("div",C,[D,(0,o.Wm)(m,{type:"text",class:"form-control",id:"code",name:"code",modelValue:e.tempItem.code,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tempItem.code=t),rules:n.validateRequired},null,8,["modelValue","rules"]),(0,o.Wm)(c,{name:"code",class:"text-warning"})]),(0,o._)("div",$,[(0,o._)("div",V,[W,(0,o.Wm)(m,{type:"number",class:"form-control",id:"discount",name:"discount",modelValue:e.tempItem.percent,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tempItem.percent=t),modelModifiers:{number:!0},rules:n.validateRequired},null,8,["modelValue","rules"]),(0,o.Wm)(c,{name:"discount",class:"text-warning"})]),(0,o._)("div",U,[(0,o._)("div",q,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[3]||(t[3]=t=>e.tempItem.is_enabled=t)},null,512),[[l.e8,e.tempItem.is_enabled]]),L])])])])]),(0,o._)("div",S,["new"===e.tempItem.status?((0,o.wg)(),(0,o.iD)("button",Z,"Close")):((0,o.wg)(),(0,o.iD)("button",z,"Delete")),F])])),_:1},8,["onSubmit"])])])],512),(0,o._)("div",R,[(0,o._)("div",T,[(0,o._)("div",j,[A,(0,o._)("div",N,[E,(0,o._)("span",H,(0,a.zw)(e.tempItem.title),1)]),(0,o._)("div",Y,[B,(0,o._)("button",{class:"btn btn-danger",onClick:t[4]||(t[4]=(0,l.iM)(((...t)=>e.deleteItem&&e.deleteItem(...t)),["prevent"]))},"Delete")])])])],512)],64)}var K=s(5842),O=s(5708),G={mixins:[K.Z],components:{Form:O.l0,Field:O.gN,ErrorMessage:O.Bc},methods:{onSubmit(e){this.updateItem()},validateRequired(e){return!!e||"This field is required"},updateItem(){const e=new Date;e.setMonth(e.getMonth()+3),this.tempItem.due_date=e.getTime(),this.$emit("update-item",this.tempItem)}}},J=s(89);const Q=(0,J.Z)(G,[["render",P]]);var X=Q,ee=s(7646),te={mixins:[ee.Z],components:{CouponModal:X},data(){return{coupons:{},pagination:{},tempItem:{},isNew:!1,isLoading:!0}},methods:{getCoupons(e=1){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/h513h/admin/coupons?page=${e}`;this.$http.get(t).then((e=>{this.isLoading=!1,this.coupons=e.data.coupons,console.log(e),this.pagination=e.data.pagination})).catch((e=>{console.log(e)}))},updateItem(e){this.tempItem=e;let t="https://vue3-course-api.hexschool.io/api/h513h/admin/coupon",s="post";this.isNew||(t=`https://vue3-course-api.hexschool.io/api/h513h/admin/coupon/${e.id}`,s="put");const o=this.$refs.modal;this.$http[s](t,{data:this.tempItem}).then((e=>{o.hideModal(),e.data.success?(console.log(e.data.message),this.getProducts(),this.emitter.emit("push-message",{style:"success",title:"Succeeded!",content:"Renewed Product List!"})):this.emitter.emit("push-message",{style:"danger",title:"Failed",content:"There are some problems..."})}))},deleteItem(e){this.temItem=e;const t=`https://vue3-course-api.hexschool.io/api/h513h/admin/coupon/${e.id}`;this.$http.delete(t,{data:this.tempItem}).then((e=>{const t=this.$refs.modal;t.hideModal(),this.getCoupons()}))}},created(){this.getCoupons()}};const se=(0,J.Z)(te,[["render",b]]);var oe=se},5842:function(e,t,s){s.d(t,{Z:function(){return i}});var o=s(7972),l=s.n(o),a={emits:["update-item","delete-item"],props:{item:{type:Object,default(){return{}}}},watch:{item(){this.tempItem=this.item}},data(){return{modal:{},tempItem:{}}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide(),this.deleteModal.hide()},deleteItem(){this.$emit("delete-item",this.tempItem)}},mounted(){this.modal=new(l())(this.$refs.modal),this.deleteModal=new(l())(this.$refs.deleteModal)}};const d=a;var i=d},7646:function(e,t,s){s.d(t,{Z:function(){return a}});var o={methods:{openModal(e,t){e?(this.tempItem={},this.tempItem.status="new"):(this.tempItem={...t},this.tempItem.status="edit"),this.isNew=e;const s=this.$refs.modal;s.showModal()}}};const l=o;var a=l}}]);
//# sourceMappingURL=217.6406a641.js.map